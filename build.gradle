apply plugin: 'java'
apply plugin: 'cpp'
apply plugin: 'c'

repositories {
    mavenCentral()
}

dependencies {
    compile 'net.java.dev.jna:jna:4.+'
    compile files('../lwjgl/jar/lwjgl.jar');
}

model {
    buildTypes {
        debug
        release
    }

    components {
        engine(NativeLibrarySpec) {
            sources {
                cpp {
                    source {
                        srcDir 'src/engine/source'
                        include '**/*.cpp'
                    }
                }

                c {
                    source {
                        srcDir 'src/engine/source'
                        include '**/*.c'
                    }
                }
            }

            binaries.all {
                if(toolChain in Gcc || toolChain in Clang) {
                    linker.args '-lFLAC++', '-lFLAC'

                    if(buildType == buildTypes.debug)
                        cppCompiler.args "-g"
                    else
                        cppCompiler.args "-O3"
                }
            }
        }
    }
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}
